"use strict";(function(){this.ajaxCartSuccess=function(e,t,o="add"){window.omegaCallBackAddToCart&&"function"==typeof window.omegaCallBackAddToCart&&window.omegaCallBackAddToCart();const n=`${this.routes.cart_url}?section_id=ecom-ajax-cart${e&&e.key?`&key=${e.key}`:""}`;window.fetch(n,{method:"GET",headers:{"Content-Type":"text/html"}}).then((e=>e.text())).then((t=>{const n=document.querySelector(".ecom-cart-popup"),a=document.createElement("div");a.classList.add("ecom-cart-popup");const i=(new DOMParser).parseFromString(t,"text/html").querySelector("#shopify-section-ecom-ajax-cart");if(!i)return window.location.href=this.routes.cart_url,!1;if(a.appendChild(i),document.body.appendChild(a),this.handleCartPopup(a),e&&e.key){if(a.querySelector(`.ecom-ajax-cart-line-item[data-key="${e.key}"]`)){const e=document.querySelector(".ecom-ajax-cart-body");if(e){const t=e.querySelector(".ecom-ajax-cart-line-item");if(t){const o=e.getBoundingClientRect().top-t.getBoundingClientRect().top;e.scrollTop=o}}}}if(n&&n.remove(),"update"===o){const e=document.querySelector(".ecom-ajax-cart-status span");e&&(e.innerHTML=e.dataset.textUpdate)}this.onAjaxPopupLoaded()})).catch((e=>{console.log(e),alert(e.message)}))},this.onAjaxPopupLoaded=()=>{const e=document.querySelector(".ecom-ajax-cart-checkout-button"),t=document.querySelector("#terms"),o=document.querySelector(".terms-error");e&&t&&o&&(e.removeAttribute("name"),e.addEventListener("click",(function(e){t.checked?o.classList.add("terms-dn"):(e.preventDefault(),o.classList.remove("terms-dn"))})),t.addEventListener("change",(function(){o.classList.add("terms-dn"),t.checked?e.setAttribute("name","checkout"):e.removeAttribute("name")})))},this.handleCartPopup=function(e){const t=this;e.addEventListener("click",(function(t){(t.target===e||t.target.closest('[data-ecom-action="close"]'))&&e.remove()}));const o=function(){"minus"===this.name?(this.nextElementSibling.stepDown(),this.nextElementSibling.dispatchEvent(new window.Event("change"))):"plus"===this.name&&(this.previousElementSibling.stepUp(),this.previousElementSibling.dispatchEvent(new window.Event("change")))},n=function(){const e=this.value,o=this.dataset.key,n=this.dataset.index,a=this.closest(".ecom-ajax-cart-line-item");a&&a.classList.add("ecom-item-loading"),t.cartItemChange(o,parseInt(e),n).then((e=>{const n=e.items?e.items.find((e=>e.key===o)):null;if(n)t.ajaxCartSuccess(n,null,"update");else{if(e.errors){t.showToast(e.errors,"error");const o=a.closest(".ecom-ajax-cart-body");if(o){const e=o.querySelector(".ecom-ajax-cart-line-item");if(e){const t=o.getBoundingClientRect().top-e.getBoundingClientRect().top;setTimeout((()=>{document.querySelector(".ecom-ajax-cart-body").scrollTo({top:t,behavior:"smooth"})}),450)}}}t.ajaxCartSuccess(null,null,"update")}a&&a.classList.remove("ecom-item-loading")})).catch((e=>{console.error(e),t.ajaxCartError(e)}))};e.querySelectorAll(".ecom-ajax-cart-line-item-quantity-button").forEach((e=>{e.addEventListener("click",o)})),e.querySelectorAll(".ecom-ajax-cart-line-item-quantity-input").forEach((e=>{e.addEventListener("change",n)}));const a=e.querySelector("#ecom-ajax-cart-note");a&&a.addEventListener("change",(function(){t.cartUpdate({note:this.value})})),e.querySelectorAll(".ecom-ajax-cart-line-item-button-remove").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),this.value=0,n.bind(this)(e)}))}))},this.ajaxCartError=function(e){alert("Error"+e.message)},this.beforeAjaxCartSend=function(){},this.checkProperties=function(e){const t=e.querySelectorAll("input[required], .hulkapps_option.required input");return Array.from(t).every((e=>e.value))},this.ajaxCart=function(){const e=this,t=t=>{if(!t.querySelector('[name="id"]'))return window.document.querySelector("#admin-bar-iframe")&&alert('Please drag Variant picker element to this section to allow the "Add to cart" feature working. This message only show for owner\'s store'),!1;let o=t.querySelector(".ecom-product-single__add-to-cart--submit.ecom-clicked");o||(o=t.querySelector(".ecom-product-single__add-to-cart--submit")),o&&(o.style.cursor="not-allowed",o.style.pointerEvents="none",o.classList.add("ecom-ajax-loading","ecom-loading")),this.beforeAjaxCartSend(t);const n=new FormData(t);return n.append("sections","cart-notification-product,cart-notification-button,cart-icon-bubble,cart-drawer"),window.fetch(this.routes.cart_add_url,{method:"POST",headers:{Accept:"application/javascript","X-Requested-With":"XMLHttpRequest"},body:n}).then((e=>e.json())).then((n=>{if(n.errors)throw new Error(n.errors);if(n.status>200)return e.showToast(n.description,"error"),o&&(o.style.cursor="pointer",o.style.pointerEvents="auto",o.classList.remove("ecom-ajax-loading","ecom-loading")),void document.dispatchEvent(new CustomEvent("ec-cart-error",{detail:n}));const{action:a,href:i,textAddedCart:r,target:c,messageAddedCart:s}=o.dataset;o&&(o.style.cursor="pointer",o.style.pointerEvents="auto",o.classList.remove("ecom-ajax-loading","ecom-loading"),o.querySelector(".ecom-add-to-cart-text")&&(o.setAttribute("data-added-to-cart",""),r&&""!==r&&(o.querySelector(".ecom-add-to-cart-text").innerHTML=r))),document.dispatchEvent(new CustomEvent("ec-cart-added",{detail:n}));const d=this.routes;switch(a){case"cart":setTimeout((()=>window.location.href=d.cart_url),500);break;case"reload":setTimeout((()=>window.location.reload()),500);break;case"checkout":setTimeout((()=>{window.location.href=d.root_url+("/"===d.root_url?"":"/")+"checkout"}),500);break;case"message":this.showToast(s);break;case"link":i&&setTimeout((()=>{"_blank"===c?window.open(i):window.location.href=i}),500);break;default:this.ajaxCartSuccess(n,t)}})).catch((e=>{o&&(o.style.cursor="pointer",o.style.pointerEvents="auto",o.classList.remove("ecom-ajax-loading","ecom-loading")),this.ajaxCartError(e,t)})),!1},o=document.querySelectorAll(".ecom-product-single__add-to-cart--submit:not(.ecom-initialized)");o.length&&o.forEach((function(n){n.addEventListener("click",(function(a){o.forEach((e=>e.classList.remove("ecom-clicked")));const i=this.closest("form.ecom-product-form");e.checkProperties(i)&&(a.preventDefault(),n.classList.add("ecom-clicked"),i.addEventListener("submit",(e=>e.preventDefault())),t.bind(document.body)(i))})),n.classList.add("ecom-initialized")})),this.handleATCList();document.querySelectorAll(".ecom-ajax-cart-simple[data-id]").forEach((t=>{t.addEventListener("click",(function(t){e.handleClickEvent(this,t)}))}))},this.handleClickEvent=function(e,t,o=!1){t.preventDefault();const n=e.closest(".ecom-collection__product-form__actions");let a=1;if(n){const e=n.querySelector(".ecom-collection__product-quantity-input");e&&(a=e.value)}const i=e,r=this;i&&(i.style.cursor="pointer",i.style.pointerEvents="auto",i.classList.add("ecom-ajax-loading")),r.beforeAjaxCartSend(t.target),window.fetch(r.routes.cart_add_url,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/javascript","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({id:i.dataset.id,quantity:a,sections:"cart-notification-product,cart-notification-button,cart-icon-bubble,cart-drawer"})}).then((e=>e.json())).then((e=>{if(e.errors)throw new Error(e.errors);if(e.status>200)return r.showToast(e.description,"error"),i&&(i.style.cursor="pointer",i.style.pointerEvents="auto",i.classList.remove("ecom-ajax-loading","ecom-loading")),void document.dispatchEvent(new CustomEvent("ec-cart-error",{detail:e}));const{action:n,href:a,textAddedCart:c,target:s,messageAddedCart:d}=i.dataset;if(i&&(i.style.cursor="pointer",i.style.pointerEvents="auto",i.classList.remove("ecom-ajax-loading","ecom-loading"),i.setAttribute("data-added-to-cart",""),c&&""!==c&&(i.querySelector(".ecom-add-to-cart-text").innerHTML=c)),r.onAjaxCartSuccess&&r.onAjaxCartSuccess(e,t.target),!o||r.configs.ajax_cart.enable)switch(document.dispatchEvent(new CustomEvent("ec-cart-added",{detail:e})),n){case"cart":setTimeout((()=>window.location.href=r.routes.cart_url),500);break;case"reload":setTimeout((()=>window.location.reload()),500);break;case"checkout":setTimeout((()=>window.location.href=r.routes.root_url+"checkout"),500);break;case"message":r.showToast(d);break;case"link":a&&setTimeout((()=>{"_blank"===s?window.open(a):window.location.href=a}),500);break;default:r.ajaxCartSuccess(e,t.target)}else setTimeout((()=>window.location.href=r.routes.cart_url),500)})).catch((e=>{window.alert(e.message),console.error(e),i&&(i.style.cursor="pointer",i.style.pointerEvents="auto",i.classList.remove("ecom-ajax-loading","ecom-loading")),r.ajaxCartError(e,t.target)}))},this.cartItemChange=function(e,t,o=null){return window.fetch(this.routes.cart_change_url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({quantity:t,line:o})}).then((e=>e.json()))},this.handleATCList=function(){const e=document.querySelectorAll(".ecom-collection__product-item .ecom-product-form"),t=this;e.forEach((e=>{const o=e.querySelector(".ecom-ajax-cart-submit"),n=e.querySelector('[name="variant_id"]');o&&n&&o.addEventListener("click",(function(e){e.preventDefault(),this.dataset.id=n.value,t.handleClickEvent(this,e,!0)})),e.classList.add("ecom-ajax-cart")}))},this.cartUpdate=function(e){return window.fetch(this.routes.cart_update_url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json()))},this.showToast=function(e,t){const o=document.querySelector("#ecom-toast-desc"),n=document.querySelector("#ecom-toast"),a=document.querySelector("#ecom-toast-icon");"error"===t?(n.style.cssText="background-color: red;overflow: hidden; z-index: 10000000;",a.style.cssText="background-color: red;",n.classList.add("ecom-toast-error")):(n.classList.remove("ecom-toast-error"),n.style.cssText="background-color: #333;overflow: hidden; z-index: 10000000;",a.style.cssText="background-color: #333; border-radius: 2px;"),n&&o&&a&&(o.innerHTML=e,n.classList.add("ecom-toast-show"),n.style.setProperty("--ecom-max-width",o.clientWidth+50+"px"),setTimeout((()=>n.classList.remove("ecom-toast-show")),5e3))},this.initToastTemplate=function(){const e=document.querySelector("#ecom-template-html");if(e){const t=document.createElement("div");t.innerHTML=e.innerHTML,document.body.appendChild(t)}},this.isAdmin=function(){return document.querySelector("#admin-bar-iframe")||window.Shopify.designMode},this.loadPopupScript=function(){if(window.EComposer&&window.EComposer.popupScriptUrl){const e=document.createElement("script");e.src=window.EComposer.popupScriptUrl,e.async=!0,e.type="text/javascript",e.id="ecom-popup-script",e.onerror=function(){console.error("Failed to load popup script")},document.head.appendChild(e)}},this.init=function(){if(this.initToastTemplate(),window.Shopify&&!this.isAdmin()){let e=window.EComposer.PAGE||window.EComposer.TEMPLATE||window.EComposer.SECTION||window.EComposer.BLOCK||{};if(e&&Object.keys(e).length){e.type&&(e.layout_type=e.type,delete e.type),e.template_id&&(e.layout_id=e.template_id,delete e.template_id);const t=window.Shopify.currency?.active||o,o=window.shopCurrency||t,n=parseFloat(window.Shopify.currency?.rate||"1");if(e.base_currency=o,e.active_currency=t,e.exchange_rate=n,window.Shopify.analytics)Shopify.analytics.publish("ec_page_viewed",e);else{let t=0;const o=setInterval((()=>{window.Shopify.analytics&&(Shopify.analytics.publish("ec_page_viewed",e),clearInterval(o)),t++,t>200&&clearInterval(o)}),100)}const a=(new Date).getTime();let i=!1;document.addEventListener("click",(()=>{i=!0}),{once:!0}),window.addEventListener("beforeunload",(()=>{if(!i){const t=(new Date).getTime()-a;window.Shopify.analytics&&Shopify.analytics.publish("ec_bounce_rate",{...e,elapsed_time:(t/1e3).toFixed(2)})}}))}}this.abTestingData&&this.abTestingData.campaigns&&this.abTestingData.campaigns.length&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",this.handleABTestingEvent.bind(this)):setTimeout(this.handleABTestingEvent.bind(this),100)),this.configs&&this.configs.ajax_cart&&this.configs.ajax_cart.enable?this.ajaxCart():(this.handleATCList(),document.body.addEventListener("submit",(e=>{e.target.classList.contains("ecom-product-form")&&"FORM"===e.target.nodeName&&window.omegaCallBackAddToCart&&"function"==typeof window.omegaCallBackAddToCart&&window.omegaCallBackAddToCart()}))),this.loadPopupScript()},this.init()}).bind(window.EComposer||{})(),function(){let e;const t=()=>{document.querySelectorAll(".ecom-sections .ecom-video-background").forEach((e=>{const t=e.dataset.source||"html5";if("true"===e.dataset.playPauseInview)if((e=>{const{top:t,bottom:o}=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;return(t>0||o>0)&&t<n})(e))if("video"===e.tagName.toLowerCase()){const t=e.play();void 0!==t&&t.catch((()=>{e.muted=!0,e.play().catch((e=>{console.warn("Video autoplay failed:",e)}))}))}else"vimeo"==t?e.contentWindow.postMessage(JSON.stringify({method:"play"}),"https://player.vimeo.com"):e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo",args:[]}),"https://www.youtube.com");else"video"===e.tagName.toLowerCase()?e.pause():"vimeo"==t?e.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com"):e.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:[]}),"https://www.youtube.com")}))};window.addEventListener("scroll",(()=>{clearTimeout(e),e=setTimeout(t,500)}));const o=()=>{document.body.hasAttribute("ecom-loaded")||(clearTimeout(window.stretchedTimmer),window.stretchedTimmer=setTimeout((()=>{const e=document.querySelectorAll(".ecom-core.ecom-section"),t=document.querySelectorAll(".ecom-swiper-container"),o=document.querySelectorAll(".ecom-sections"),n=window.innerWidth;if(e.length>0){o.forEach((e=>e.style.width=""));const t=(n-o[0].offsetWidth)/2;e.forEach((e=>{e.classList.contains("ecom-section__stretched")?(e.style.width=n+"px",e.style.marginLeft=-t+"px"):(e.style.width="",e.style.marginLeft="")}))}t.length>0&&t.forEach((e=>{e.EComSwiper&&e.EComSwiper.update()}))}),50))};o(),window.addEventListener("resize",o),window.addEventListener("load",o),document.addEventListener("DOMContentLoaded",(()=>{"function"==typeof window.EComposer.initQuickview&&window.EComposer.initQuickview();const e=document.querySelectorAll(".ecom-section__overlay > .ecom-video-background");e.length&&e.forEach((e=>{e.addEventListener("click",(function(){e.paused?e.play():e.pause()}))}))}));const n=(e,t)=>{new IntersectionObserver(((o,n)=>{o.forEach((o=>{if(o.isIntersecting){if(t.cb)t.cb(e);else{const e=o.target.getAttribute("ec-delay")||o.target.getAttribute("data-animation-delay"),t=parseInt(e)||10,n=()=>{setTimeout((()=>{o.target.classList.add("ecom-animated","animated"),o.target.addEventListener("animationend",(()=>{o.target.classList.add("ecom-animated-end")}),{once:!0})}),t)},a=o.target.closest(".ecom-animation");a&&a!==o.target?a.classList.contains("ecom-animated-end")?n():a.addEventListener("animationend",n,{once:!0}):n()}n.unobserve(o.target)}}))}),t).observe(e)};((e,t={})=>{Array.from(document.querySelectorAll(e)).forEach((e=>n(e,t)))})(".ecom-animation");(function(){const e=this;this.defaultValue=[],this.init=function(){const t=document.querySelectorAll("[ecom-scrolling-animation]");t.length&&window.addEventListener("scroll",(()=>{e.handleScrollAnimation(t)}))},this.handleScrollAnimation=function(t){t.forEach(((t,o)=>{e.animation(t,o)}))},this.animation=function(e,t){const o=e.getAttribute("ecom-scrolling-animation")?JSON.parse(e.getAttribute("ecom-scrolling-animation")):null;if(!o)return;const n=this.getViewPercentage(e),a=n>0&&n<100,i=this.getOptions(o,n,e,t);if(a){let t="",o="",n="";if(Object.keys(i).forEach((e=>{["translateX","translateY"].includes(e)?(t+=`${e}(${i[e]})`,delete i[e]):["blur"].includes(e)?(n+=`${e}(${i[e]})`,delete i[e]):["rotate"].includes(e)&&(o=`${e}(${i[e]})`,delete i[e])})),Object.keys(i).length&&Object.assign(e.style,i),t&&(e.style.transform=t,e.ecomCSSTransform=!0),n&&(e.style.filter=n,e.ecomCSSFilter=!0),o){const t=e.querySelector(":first-child");t&&(t.style.transform=o),e.ecomCSSRotate=!0}}else if(e.ecomCSSTransform&&(e.style.transform="",e.ecomCSSTransform=!1),e.ecomCSSFilter&&(e.style.filter="",e.ecomCSSFilter=!1),e.ecomCSSRotate){const t=e.firstElementChild;t&&(t.style.transform=""),e.ecomCSSRotate=!1}},this.getStyleValue=function(e,t){if(!t)return"";const o=new RegExp(`${e}\\(([\\d\\-.a-z]+)\\)`),n=t.match(o);return n?n[1]:""},this.getOptions=function(t,o,n,a){const i={};return t.forEach((t=>{const r=t.value;if(!r)return;const c=0<o&&o<100;let s;if(e.defaultValue[a]){if(void 0===e.defaultValue[a][t.css]){let o=n.style[t.css];["translateX","translateY"].includes(t.css)&&(o=e.getStyleValue(t.css,n.style.transform)||0),["blur"].includes(t.css)&&(o=e.getStyleValue(t.css,n.style.filter)||0),e.defaultValue[a][t.css]=o}}else e.defaultValue[a]={},e.defaultValue[a][t.css]=n.style[t.css];if(c)if(r.trigger_start||r.trigger_end){let t,n=r.trigger_start||0,a=r.trigger_end||100;if(n>a&&([n,a]=[a,n]),n>o)t=0;else if(a<o)t=100;else{t=(o-n)/(a-n)*100}s=e.caculateCss(t,r)}else s=e.caculateCss(o,r);else s=e.defaultValue[a][t.css];i[t.css]=s})),i},this.caculateCss=function(e,t){if(t.hasOwnProperty("start")&&t.hasOwnProperty("end")){let o;if(t.hasOwnProperty("middle")){const n=this.toInt(t.start),a=this.toInt(t.middle),i=this.toInt(t.end);e<=50?(o=(n-a)*(e/100/.5),o=n-o):(o=(a-i)*(1-e/100/.5),o=a+o)}else{o=(this.toInt(t.start)-this.toInt(t.end))*(e/100),o=this.toInt(t.start)-o}return o+this.getUnit(t.start)}if(t.middle&&50===e)return this.toInt(t.middle)+this.getUnit(t.middle)},this.toInt=function(e){return"number"==typeof e?e:parseInt(e.replace("px",""))},this.getUnit=function(e){return"number"==typeof e?"":e.replace(/-?([\d]+)/,"")},this.getViewPercentage=function(e){const t=e.getBoundingClientRect(),o=window.innerHeight;return(window.scrollY+o-(t.y+window.pageYOffset))/((o+t.height)/100)},this.init()}).bind({}).call();const a=document.querySelectorAll(".ecom-use-parallax .ecom-parallax-background img"),i=()=>{a.forEach((e=>(e=>{if(!e)return;const t=e.closest(".ecom-use-parallax"),o=t.getBoundingClientRect().top+window.scrollY,n=window.scrollY,a=window.innerHeight,i=t.clientHeight,r=n+a;if(r>o&&n<o+i){const t=-1.5*(r-o)/(a+i)*100+125;e.style.top=t+"%",e.style.transform=`translate(-50%, -${t}%)`}})(e)))};a.length>0&&(document.addEventListener("scroll",i),window.addEventListener("load",i)),document.addEventListener("shopify:section:load",(e=>{const t=JSON.parse(unescape(e.target.dataset.shopifyEditorSection));let o=null;if(t.type&&t.type.includes("ecom-")&&(o=e.target),!o)return;o.querySelectorAll("script").forEach((e=>{if(e.src){o.removeChild(e);const t=document.createElement("script");t.src=e.src,o.prepend(t)}}))}))}();